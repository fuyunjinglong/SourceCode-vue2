{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 高类聚，低耦合\r\nclass Observer{\r\n    constructor(data){\r\n        this.walk(data);\r\n    }\r\n    walk(data){\r\n        // 遍历一遍数据，添加响应式\r\n        Object.keys(data).forEach(key=>{\r\n            defineReactive(data,key,data[key])\r\n        })\r\n    }\r\n}\r\n\r\nfunction defineReactive(data,key,value){\r\n    // 属性全部被重写\r\n    // 递归代理属性\r\n    observe(value);\r\n    Object.defineProperty(data,key,{\r\n        get(){\r\n            return value\r\n        },\r\n        set(newV){\r\n            observe(value);\r\n            value = newV===value?value:newV;\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data){\r\n    // 数据响应式\r\n    if(typeof data !== 'object'||data===null){\r\n        return;// 如果不是对象，就不处理\r\n    }\r\n    /**\r\n * Class方法扩展与构造函数方法扩展比较：\r\n * 1.Class用于扩展方法耦合的场景，但扩展方法都在class内部\r\n * 2.构造函数用于外部方法的任意扩展，使用原型属性继承扩展方法，可以无限扩展，不受约束\r\n */\r\n// 这里采用Class类\r\n    return new Observer(data)\r\n}","import { observe } from \"./observe/index.js\";\r\n\r\nexport  function initState(vm){\r\n    const options =vm.$options\r\n\r\n    if(options.data){\r\n        initData(vm)\r\n    }\r\n\r\n}\r\n\r\nfunction initData(vm){\r\nlet data = vm.$options.data;\r\n// 判断是否为函数，如果是则执行函数获取返回值。\r\n// 代理后，添加到vm实例上_data\r\ndata=vm._data = typeof data ==='function'?data.call(vm):data;\r\n// 观察数据,实现响应式\r\nobserve(data)\r\nconsole.log(data);\r\n}","import {initState} from './state'\r\n\r\nexport default function initMixin(Vue){\r\n// 扩展Vue的方法\r\nVue.prototype._init=function(options){\r\n    // 绑定所有选项参数到实例上，后续所有的扩展方法都可以拿到这些选项\r\n    const vm = this\r\n    // $表示Vue自己的属性参数\r\n    vm.$options= options\r\n    // 初始化数据，如prop,data,methods,computed,watch\r\n    initState(vm)\r\n}\r\n}","/**\r\n * Class方法扩展与构造函数方法扩展比较：\r\n * 1.Class用于扩展方法耦合的场景，但扩展方法都在class内部\r\n * 2.构造函数用于外部方法的任意扩展，使用原型属性继承扩展方法，可以无限扩展，不受约束\r\n */\r\n\r\nimport initMixin from './init'\r\nfunction Vue(options){\r\nthis._init(options)\r\n}\r\n\r\ninitMixin(Vue) // 扩展方法通过传入Vue构造函数，通过原形添加方法，并分文件管理\r\nexport default Vue"],"names":["Observer","data","_classCallCheck","walk","_createClass","key","value","Object","keys","forEach","defineReactive","observe","defineProperty","get","set","newV","_typeof","initState","vm","options","$options","initData","_data","call","console","log","initMixin","Vue","prototype","_init"],"mappings":"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"}